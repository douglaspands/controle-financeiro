{% extends "base/template.html" %}
{% load static %}
{% load humanize %}

{% block titulo %}Gerenciamento{% endblock %}

{% block style %}
<link rel="stylesheet" href="{% static 'vendor/flickity/flickity.min.css' %}" media="screen">
<link rel="stylesheet" href="{% static 'css/carteiras/style.css' %}">
{% endblock %}

{% block cabecalho %}
{% endblock %}

{% block conteudo %}
<div class="feed">
    <div class="wrapper-carousel">
        <div class="carousel" data-flickity data-flickity-options='{ "wrapAround": true }'>
            {% for centro_custo in centro_custos %}
            <div class="carousel-cell">
                {% if centro_custo.e_cartao %}
                <a class="nostyle" href="{% url 'carteiras_cartoes:detalhar' carteira.slug centro_custo.cartao.slug %}">
                    <div class="carousel-cartao">
                        <div class="titulo">{{ centro_custo.cartao.nome }}</div>
                        <div class="detalhe">**** **** **** ****</div>
                        <div class="icone">CARTÃO</div>
                        <div class="valor">R$ {{ centro_custo.cartao.valor_total|intcomma }}</div>
                    </div>
                </a>
                {% else %}
                <a class="nostyle" href="{% url 'carteiras_contas:detalhar' carteira.slug centro_custo.conta.slug %}">
                    <div class="carousel-cartao">
                        <div class="titulo">{{ centro_custo.conta.nome }}</div>
                        <div class="detalhe">Agencia: **** Conta: *****-*</div>
                        <div class="icone">CONTA</div>
                        <div class="valor">R$ {{ centro_custo.conta.valor_total|intcomma }}</div>
                    </div>
                </a>
                {% endif %}
            </div>
            {% empty %}
            <div class="carousel-cell-disabled">
                <a class="nostyle" href="{% url 'carteiras_cartoes:criar' carteira.slug %}">
                    <div class="carousel-cartao">
                        <div class="titulo">Meu primeiro cartão ou conta</div>
                        <div class="detalhe"></div>
                        <div class="icone"></div>
                        <div class="valor">R$ 0,00</div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
        <div class="botao-criar-centro-custo botao botao-primario" onclick="modalCriarContaCartao.open();">+ Conta/Cartão</div>
        {% if centro_custos %}
        <div class="botao-criar-lancamento botao botao-primario" onclick="modalCriarDespesaReceita.open();">+ Despesa/Receita</div>
        {% else %}
        <a class="nostyle botao-criar-lancamento botao botao-primario-inativo" href="#">+ Despesa/Receita</a>
        {% endif %}
    </div>
    {% if lancamentos %}
    <div class="bloco col-12">
        <div class="bloco-ancora"></div>
        <div class="bloco-cabecalho">
            <div class="bloco-titulo">Ultimos Lançamentos</div>
            <a class="bloco-menu nostyle" href="{% url 'carteiras_lancamentos:criar' carteira.slug %}">
                <img class="bloco-menu-icone" src="{% static 'icon/add_gray_24dp.svg' %}" />
            </a>
        </div>
        <div class="bloco-conteudo">
            {% for lancamento in lancamentos %}
            <div class="lancamento-linha">
                <div class="lancamento-logo">?</div>
                <div class="lancamento-titulo">{{ lancamento.descricao}}</div>
                <div class="lancamento-data">{{ lancamento.datahora|date:'d/m/Y H:i' }}</div>
                <div class="lancamento-valor">R$ {{ lancamento.valor|intcomma }}</div>
            </div>
            {% endfor %}
        </div>
        {% if lancamentos_continua %}
        <div class="bloco-rodape"><a class="nostyle" href="{% url 'carteiras_lancamentos:listar' carteira.slug %}">Ver
                mais +</a></div>
        {% endif %}
    </div>
    {% endif %}
</div>

<div id="modalCriarContaCartao" class="modal">
    <div class="modal-content">
        <div class="modal-close" onclick="modalCriarContaCartao.close();">&times;</div>
        <div class="modal-criar-centro-custo">
            <div class="texto">O que deseja adicionar?</div>
            <div class="botao1">
                <a class="nostyle botao botao-primario" href="{% url 'carteiras_cartoes:criar' carteira.slug %}">Cartão</a>
            </div>
            <div class="botao2">
                <a class="nostyle botao botao-primario" href="{% url 'carteiras_contas:criar' carteira.slug %}">Conta</a>
            </div>
        </div>
    </div>
</div>

<div id="modalCriarDespesaReceita" class="modal">
    <div class="modal-content">
        <div class="modal-close" onclick="modalCriarDespesaReceita.close();">&times;</div>
        <div class="modal-criar-centro-custo">
            <div class="texto">O que deseja adicionar?</div>
            <div class="botao1">
                <a class="nostyle botao botao-primario" href="{% url 'carteiras_lancamentos:criar' carteira.slug %}">Despesa</a>
            </div>
            <div class="botao2">
                <a class="nostyle botao botao-primario" href="{% url 'carteiras_lancamentos:criar' carteira.slug %}">Receita</a>
            </div>
        </div>
    </div>
</div>


{% endblock %}

{% block script %}
<script src="{% static 'vendor/flickity/flickity.pkgd.min.js' %}"></script>
<script src="{% static 'js/carteiras/script.js' %}"></script>
{% endblock %}